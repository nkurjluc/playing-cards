<div class="preview">
<app-playing-card [produit]="product"></app-playing-card>
</div>
<div class="main">
    <form [formGroup]="formGroup" (submit)="submit($event)">
        <mat-form-field>
            <mat-label for="name">Name</mat-label>
            <input matInput id="name" name="name" type="text" formControlName="name"/>
            @if(isFieldValid('name')){
                <mat-error>This field is requires.</mat-error>
            }               
        </mat-form-field>
        <div class="form-field">
            <label for="image">Image</label>
            <input id="image" name="image" type="file" (change)="onFileChange($event)"/>
            @if(isFieldValid('image')){
                <div class="error">This field is invalid.</div>
            }             
        </div>
        <div class="form-field">
            <label for="type">Type</label>
            <select id="type" name="type" formControlName="type">
            @for (type of listProducts; track type){
                <option [value]="type">{{type}}</option>
            }   
            </select>          
        </div>
        <div class="form-field">
            <label for="hp">HP</label>
            <input id="hp" name="hp" type="number" formControlName="hp"/>
            @if(isFieldValid('hp')){
                @if(formGroup.get('hp')?.hasError('required')){
                    <div class="error">This field is invalid.</div>
                }
                @if (formGroup.get('hp')?.hasError('min')){
                    <div class="error">This field must be bigger than 0.</div>
                }
                @if (formGroup.get('hp')?.hasError('max')){
                    <div class="error">This field must be smaller or equal to 200</div>
                }
            }               
        </div>
        <div class="form-field">
            <label for="figureCaption">Figure Caption</label>
            <input id="figureCaption" name="figureCaption" type="text" formControlName="figureCaption"/>
            @if(isFieldValid('figureCaption')){
                <div class="error">This field is requires</div>
            }               
        </div>
        <div class="form-field">
            <label for="attackName">Attack Name</label>
            <input id="attackName" name="attackName" type="text" formControlName="attackName"/>
            @if(isFieldValid('attackName')){
                <div class="error">This field is requires</div>
            }               
        </div>
        <div class="form-field">
            <label for="attackStrength">Attack Strength</label>
            <input id="attackStrength" name="attackStrength" type="number" formControlName="attackStrength"/>
            @if(isFieldValid('attackStrength')){
                @if(formGroup.get('attackStrength')?.hasError('required')){
                    <div class="error">This field is invalid.</div>
                }
                @if (formGroup.get('attackStrength')?.hasError('min')){
                    <div class="error">This field must be bigger than 0.</div>
                }
                @if (formGroup.get('attackStrength')?.hasError('max')){
                    <div class="error">This field must be smaller or equal to 200</div>
                }
            }               
        </div>
        <div class="form-field">
            <label for="attackDescription">Attack Description</label>
            <input id="attackDescription" name="attackDescription" type="text" formControlName="attackDescription"/>
            @if(isFieldValid('attackDescription')){
                <div class="error">This field is requires</div>
            }               
        </div>

        <div class="button-container">
            <button mat-button (click)="navigateBack()"> Back</button>
            <button mat-flat-button type="submit" [disabled]="formGroup.invalid">Save</button>             
        </div>
    
    </form>
</div>



 